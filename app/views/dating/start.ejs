<script
    type="module"
    src="/javascripts/reservationFinder.component.js"
></script>

<div class="container mt-5">
    <div id="instructions" class="row shadow-sm rounded-4 border p-4">
        <div
            class="instructions col-lg-6 d-flex flex-column justify-content-center"
        >
            <h2>Which car is best for you?ğŸš—ğŸ’—</h2>
            <ol>
                <li>Set your preferences for potential matches. ğŸ“†ğŸ“ğŸ—º</li>
                <li>Click on the heart ğŸ’Ÿ if you like the car.</li>
                <li>Click on the âŒ if you don't the car.</li>
                <li>We'll find you perfect match. ğŸ’˜</li>
            </ol>
        </div>

        <reservation-finder
            class="d-flex flex-column gap-2 col-lg-6"
            mode="catalogue"
            callback="fetch-10-vehicles"
        >
            <div class="modal-body">
                <div class="form-text"></div>
                <input
                    type="text"
                    id="dateRangeFinder"
                    class="form-control p-3"
                    placeholder="What day(s) do you need a car?"
                    aria-label="Recipient's username"
                />
                <div class="form-text"></div>
                <input
                    id="postal"
                    name="postal"
                    class="form-control p-3 postal-group"
                    placeholder="Postal Code or Airport"
                    aria-label="postal-code"
                />
            </div>
            <div class="modal-footer">
                <button
                    class="btn btn-dark dating-button w-100"
                    type="button"
                    id="search-vehicles"
                >
                    Go
                    <i class="bi bi-arrow-through-heart-fill"></i>
                </button>
            </div>
        </reservation-finder>
    </div>
    <script type="module" src="/javascripts/swipeGame.component.js"></script>
    <style>
        #buttonsContainer {
            display: flex;
            justify-content: center;
            gap: 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-top: 1rem;
            padding: 1rem;
        }
        #likeButton .bi-heart-fill {
            color: pink;
            font-size: 2rem;
        }
        #dislikeButton .bi-x {
            font-size: 2rem;
        }
    </style>
    <script type="module" src="/javascripts/datingCard.component.js"></script>
    <div class="container d-flex justify-content-center">
        <swipe-game
            style="position: relative !important; display: none !important"
        >
            <div id="cardSpace" class="fade"></div>
            <div id="buttonsContainer" class="fade">
                <button id="dislikeButton" class="btn start-reservation">
                    <i class="bi bi-x"></i>
                </button>
                <button id="likeButton" class="btn start-reservation">
                    <i class="bi bi-heart-fill" style="color: pink"></i>
                </button>
            </div>
            <div class="d-flex justify-content-center mb-5">
                <a
                    id="bookMatchedCar"
                    href="/vehicles/booking/65ff9b41d313082f48371c08"
                    class="btn btn-dark fade"
                    aria-current="true"
                    role="button"
                >
                    <i class="bi bi-calendar3-range px-2"></i>
                    Book this vehicle
                </a>
            </div>
            <div
                id="loadingOverlay"
                class="fade d-flex justify-content-center align-items-center"
                style="
                    position: absolute !important;
                    top: 0;
                    left: 0;
                    width: 100% !important;
                    height: 100% !important;
                    padding: 1rem;
                    background: white;
                    pointer-events: none;
                    z-index: 1000;
                "
            >
                <div
                    class="spinner-grow"
                    role="status"
                    style="color: var(--sun-glow)"
                >
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </swipe-game>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>

<script>
    document.addEventListener('mousemove', function (e) {
        let body = document.querySelector('body');
        let heart = document.createElement('span');
        let x = e.offsetX;
        let y = e.offsetY;
        heart.style.left = x + 'px';
        heart.style.top = y + 'px';

        let size = Math.random() * 80;
        heart.style.width = 20 + size + 'px';
        heart.style.height = 20 + size + 'px';

        let transformValue = Math.random() * 360;
        heart.style.transform = 'rotate(' + transformValue + 'deg)';

        body.appendChild(heart);

        setTimeout(function () {
            heart.remove();
        }, 1000);
    });
</script>
